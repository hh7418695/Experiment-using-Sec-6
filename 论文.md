# Experiment Design: Stretching vs Bending Stiffness Sensitivity

## 0. 文档目的

本文件用于清晰记录本 MSc Extended Research Project 中的**心理物理实验设计**，包括：

- 研究问题与总体思路
- 虚拟物体参数（10 个 object 的 ks / kb 设置）
- 实验条件与 block 设计（Stretching / Bending）
- trial 结构、受试者指令
- 数据记录格式与后续分析计划

该文档既作为实验实施的操作说明，也为后续论文 Methods 部分提供素材。

---

## 1. Research Question & Aim

### 1.1 Research Question

> Within a given range of stretching and bending stiffness values, when interacting haptically with a virtual deformable object, are humans more sensitive to changes in stretching stiffness or to changes in bending stiffness?

（中文理解：在给定的拉伸刚度和弯曲刚度区间内，当人用触觉与虚拟可变形物体交互时，对哪一种刚度变化更敏感——拉伸还是弯曲？）

### 1.2 Aim

> The aim of this project is to compare human haptic sensitivity to changes in stretching stiffness versus changes in bending stiffness when interacting with a virtual deformable object using two-alternative forced-choice (2AFC) discrimination tasks.

---

## 2. Apparatus & Software

### 2.1 Haptic 装置

- 设备：Geomagic Touch / TouchX 类桌面型力反馈设备
- 自由度：3D 位置输入 + 3D 力输出
- 更新频率：1 kHz（由设备驱动库提供）

### 2.2 双端程序架构（Teleoperation + Simulation）

- C++ 端（`main.cpp`）

  - 负责与 haptic 设备通信（读取笔尖位置，输出力）
  - 使用 OpenHaptics / HD API 进行高频力渲染
  - 通过 UDP 将 stylus 位置发送给 Python 端，并接收 Python 端计算得到的反馈力 :contentReference[oaicite:0]{index=0}
- Python 端（`main.py`）

  - 使用 JAX 搭建串联质量–弹簧–弯曲模型（5 个节点）
  - 根据 object_id 选择对应的拉伸刚度 ks 和弯曲刚度 kb：:contentReference[oaicite:1]{index=1}

    - `stretching_val_list = linspace(50, 1000, 5)`
    - `bending_val_list   = linspace(0, 0.1,   5)`
  - 实时接收 stylus 位置，进行物体动力学仿真，计算力并回传给 C++ 端
  - 负责保存本次 trial 的仿真数据和行为数据（CSV、JSON 等）

> 这一段你之后可以再补几个参数：仿真时间步 dt、虚拟耦合刚度、阻尼等。

---

## 3. Virtual Objects 定义（10 个对象）

### 3.1 串联质量–弹簧模型参数（统一）

- 节点数：N = 5
- 质量：每个节点 40 g，总质量 200 g
- 节点间距离：每段 0.05 m，总长度 0.20 m :contentReference[oaicite:2]{index=2}
- 通用阻尼：启用，一致设置（例如 0.1 × scale）

> 这些是所有 object 共享的“几何和质量”属性。

### 3.2 Stiffness 参数空间

根据代码逻辑：:contentReference[oaicite:3]{index=3}

- 拉伸刚度列表：

  - `stretching_val_list = [50, 287.5, 525, 762.5, 1000]`  （单位：N/m 的标量，再乘 1e3 给仿真用）
- 弯曲刚度列表：

  - `bending_val_list    = [0, 0.025, 0.05, 0.075, 0.1]`  （单位：某 bending stiffness 标度，同样乘 1e3）

### 3.3 10 个虚拟 object 的定义

- **Object 1–5：拉伸系列（stretching set）**

  - ks 分别为：50, 287.5, 525, 762.5, 1000
  - kb 固定：0.05
- **Object 6–10：弯曲系列（bending set）**

  - kb 分别为：0, 0.025, 0.05, 0.075, 0.1
  - ks 固定：525

用表格写清楚（你可以在 md 里这样写）：

| Object ID | ks (stretching) | kb (bending) | 用途说明                 |
| ----------: | ----------------: | -------------: | -------------------------- |
|         1 |              50 |         0.05 | 拉伸 block，用于 ks 对比 |
|         2 |           287.5 |         0.05 | 同上                     |
|         3 |             525 |         0.05 | 中间值                   |
|         4 |           762.5 |         0.05 |                          |
|         5 |            1000 |         0.05 |                          |
|         6 |             525 |            0 | 弯曲 block，用于 kb 对比 |
|         7 |             525 |        0.025 |                          |
|         8 |             525 |         0.05 |                          |
|         9 |             525 |        0.075 |                          |
|        10 |             525 |          0.1 |                          |

---

## 4. Experimental Design（实验设计）

### 4.1 设计类型

- 心理物理 **2AFC（two-alternative forced choice）**  辨别任务
- 两个 block：

  1. **Stretching block**：只改变 ks，kb 固定
  2. **Bending block**：只改变 kb，ks 固定
- 每个 block 内：

  - 5 个不同刚度 level → 10 个无序 pair（C(5,2) = 10）
  - 每个 pair 重复 4 次
  - 共 40 trials / block
- 每个参与者总共：80 trials（如有需要可分两次 session）

### 4.2 Stretching block 设计

- **自变量**：拉伸刚度 ks（5 个水平，对应 object 1–5）
- **控制变量**：弯曲刚度 kb = 0.05
- **因变量**：在每个 trial 中，参与者在一对物体之间选择

  > “哪一个更不容易被拉长？”（first vs second）
  >
- pair 结构（示例）：

  - (1,2) (1,3) (1,4) (1,5)
  - (2,3) (2,4) (2,5)
  - (3,4) (3,5)
  - (4,5)
- 每个 pair 随机决定顺序（谁先谁后），重复 4 次。

### 4.3 Bending block 设计

- **自变量**：弯曲刚度 kb（5 个水平，对应 object 6–10）
- **控制变量**：拉伸刚度 ks = 525
- **因变量**：在每个 trial 中，参与者在一对物体之间选择

  > “哪一个在弯的时候感觉更硬？”
  >
- pair 和重复次数与 stretching block 镜像一致。

### 4.4 Block 顺序与平衡

- 如果样本量允许：

  - 一半被试：先做 Stretching，再做 Bending
  - 另一半被试：先做 Bending，再做 Stretching
- 中间安排短休息（例如两个 block 之间 2–3 分钟 break）

---

## 5. Trial Procedure（实验流程：蒙眼 + 降噪耳机）

本实验为 2AFC 任务。参与者戴眼罩与包耳式耳机，通过力反馈设备触摸虚拟可变形物体。屏幕内容只给实验员看，参与者看不到终端输出。

---

### 5.1 预训练阶段（有视觉、有正常听觉）

在正式实验前，先不戴眼罩和耳机，对参与者进行说明与练习：

1. 向参与者解释实验任务和两个 block：

    - 拉伸 block：比较“哪一个更不容易被拉长”。
    - 弯曲 block：比较“哪一个在弯的时候感觉更硬”。
2. 示范如何操作笔尖（上下拉动、左右弯曲等），并强调：

    - 每一轮会依次接触两个虚拟物体（第一个、第二个）。
    - 两个都体验完后，需要在二者中**必须选一个**，不能回答“差不多”或“一样”。
3. 做若干练习 trial（用差异较大的 pair），直到参与者：

    - 理解“第一个 / 第二个”的含义；
    - 能在不看屏幕的情况下，听到指令后清楚地回答“第一个”或“第二个”。

确认无误后，才进入正式实验。

---

### 5.2 实验时的听觉设置

- 参与者戴上眼罩与包耳式耳机。
- 耳机中播放白噪声或轻音乐，用于遮挡设备与环境噪声。
- 白噪声音量设置为：

  - 可以减弱背景噪声；
  - 但参与者仍能清楚听到实验员略大声的口头指令（这一点在预训练阶段提前确认）。
- 如有需要，实验员可以在“提问阶段”短暂降低或暂停白噪声。

---

### 5.3 Block 层级流程

每个参与者完成两个 block（顺序可平衡）：

1. **Stretching block（拉伸刚度 ks）**

    - 使用 object 1–5（ks 不同，kb 固定为 0.05）。
    - 5 个 ks 水平 → C(5,2)=10 个 pair，每个 pair 重复 4 次 → 40 trials。
2. **Bending block（弯曲刚度 kb）**

    - 使用 object 6–10（kb 不同，ks 固定为 525）。
    - 同样 10 个 pair × 每个 4 次 → 40 trials。

两个 block 之间安排短暂休息（约 2–3 分钟），视参与者状态可增加休息时间。

---

### 5.4 单个 trial 的时间线（通用于两个 block）

下面从“实验员视角”描述**单个 trial** 的步骤。程序会根据预生成的 trial 列表自动给出 `first_object` 和 `second_object`：

1. **准备阶段**

    - 终端显示当前 trial 信息：

      - `block_type`（stretch / bend）
      - `ref_object_id`、`comp_object_id`
      - `first_object`、`second_object`
    - 实验员确认参与者手柄位置稳定、注意力集中。
2. **第一段刺激（first object）**

    - 实验员口头提示：

      > “现在开始这一轮，请先感受第一个物体。”
      >
    - 程序将 `current_object_id` 设为 `first_object`，启动仿真。
    - 给予约 **5–8 秒** 的探索时间：

      - Stretching block：引导参与者上下拉动手柄，感受被拉长时的阻力。
      - Bending block：引导参与者前后或左右移动，使条带弯曲，感受弯曲时的硬度。
3. **间隔期**

    - 停止第一段刺激，力回复到接近 0。
    - 实验员提示：

      > “第一个结束，请放松一下，准备第二个。”
      >
    - 间隔约 **0.5–1 秒**。
4. **第二段刺激（second object）**

    - 实验员提示：

      > “现在是第二个物体。”
      >
    - 程序切换 `current_object_id = second_object`，再次给约 **5–8 秒** 的探索时间。
5. **回答阶段**

    - 标准问题：

      - Stretching block：

        > “哪一个更不容易被拉长？”
        >
      - Bending block：

        > “哪一个在弯的时候感觉更硬？”
        >
    - 因为参与者在预训练阶段已经熟悉问题，正式 trial 中实验员可以简化为：

      > “请告诉我：第一个还是第二个？”
      >
    - 参与者回答“第一个”或“第二个”，实验员在终端中输入：

      - 按 `1` → `chosen_object = "first"`
      - 按 `2` → `chosen_object = "second"`
6. **记录与进入下一 trial**

    - 程序根据物理参数自动判定该 trial 是否正确（`is_correct = 1/0`），并将所有字段写入 CSV。
    - 若 trial 数达到一半（例如 40 中的第 21 个），终端可提示可短暂休息。
    - 确认参与者状态良好后继续下一 trial。


## 6. 受试者说明（Participant Instructions）

### 6.1 中文说明（示例）

> 在这个实验中，你会通过一个力反馈手柄依次接触两个虚拟物体。
> 每一轮试验中，你会先接触第一个物体，然后接触第二个物体。
> 你的任务只有一个：比较这两个物体，在**拉伸 / 弯曲**时哪一个“更硬”。
>
> - 拉伸部分：请判断“哪一个更不容易被拉长？”
> - 弯曲部分：请判断“哪一个在弯的时候感觉更硬？”
>
> 每一轮结束时，你需要在两个选项里**必须选一个**，不能回答“两者一样”。
> 实验中如果觉得疲劳，可以随时告诉实验员，我们可以中途暂停或休息。

你可以在 md 里再加一个英文版，方便后面直接粘进论文。

---

## 7. Data Recording（数据记录：CSV）

### 7.1 行为数据文件

行为数据由 Python 程序在每个 trial 后自动写入 CSV 文件。
文件按被试与 block 区分，例如：

- `behaviour_results/participant_1_stretch_behaviour.csv`
- `behaviour_results/participant_1_bend_behaviour.csv`

每行对应一个 trial。CSV 表头字段与代码中的 `fieldnames` 完全一致：

```text
participant_id,
trial_index,
block_type,
ref_object_id,
comp_object_id,
k_stretch_ref,
k_stretch_comp,
k_bend_ref,
k_bend_comp,
first_object,
second_object,
chosen_object,
is_correct,
notes
```


## 8. Planned Data Analysis（数据分析计划）

这里只需要写“你打算怎么处理”，不用现在就真的算。

### 8.1 每个 block 内的辨别性能

1. 定义“物理上更硬”的一方（例如 ks 大的 object）
2. 对每个 pair 计算正确率：

    - 正确 = 被试选择了“更硬”的那个
3. 将 10 个 pair 分成：

    - **小差组**：相邻刚度（例如 (1,2)、(2,3)、(3,4)、(4,5)）
    - **大差组**：相隔更远的 pair（(1,3)、(1,4)... 等）
4. 计算小差组 vs 大差组的平均正确率，比较它们的差异。

### 8.2 拉伸 vs 弯曲敏感度的比较

- 对 stretching block 和 bending block 分别：

  - 计算整体正确率 / 小差组正确率
  - 如果可能，拟合 psychometric curve（刚度差 Δks 或 Δkb vs 正确率）
- 比较两个 block 的指标（例如小差条件下的正确率或阈值），

  - 看哪一个维度（ks vs kb）表现出更高的敏感度。

---

## 9. Pilot & Notes（试运行与备注）

- 在正式被试前先找 1–2 个同学做 pilot：

  - 检查：问题句子是否听得懂？
  - trial 总时长是否太长？是否需要减少重复次数？
- 根据 pilot 反馈调整：

  - 探索时间（3s/4s）
  - 休息频率
  - 提示文字是否需要更清楚

---

## 10. To-do 列表（给你的备忘）

- [ ] 在 `main.py` 中实现：自动生成所有 pair + trial 随机顺序
- [ ] 实现按键记录逻辑（button 1/2 → response）
- [ ] 写一个简单函数，把所有 trial 结果写入 CSV
- [ ] 用 1 人 pilot 验证：80 个 trial 是否可接受
- [ ] 根据实际使用体验，更新本 md 文档（版本号、日期）